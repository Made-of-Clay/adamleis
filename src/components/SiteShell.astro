---
import 'simpledotcss/simple.min.css';
import '@/styles/global.css';
import HeaderLink from './HeaderLink.astro';
import GoogleFont from './GoogleFont.astro';
import FontAwesome from './FontAwesome.astro';
import Footer from './Footer.astro';
const { title, page } = Astro.props;
---

<html data-theme="night" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <title>{title} | Adam Leis</title>

    <GoogleFont />
    <FontAwesome />

    <script is:inline>
      // figure out user's preferred theme and set it as html class for tailwind before paint
      if (typeof window !== "undefined") {
        const themeColor = {
          dark: "#0f172a",
          light: "#ffffff",
        };
        const isSystemColorSchemeDark = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches;
        const storageTheme = sessionStorage.getItem("theme");
        if (
          (!storageTheme && isSystemColorSchemeDark) ||
          storageTheme === "dark"
        ) {
          document.documentElement.classList.add("dark");
          document.head.children.namedItem("theme-color").content =
            themeColor.dark;
        } else {
          // we already server-render light theme
          document.head.children.namedItem("theme-color").content =
            themeColor.light;
        }
      }
    </script>
  </head>
  <body>
    <header>
        <!-- TODO build one of the logo monogram ideas -->
        <a id="homeLink" href="/">Adam Leis</a>

        <nav id="siteNav">
            <HeaderLink href="/#about-me">About</HeaderLink>
            <HeaderLink href="/blog">Blog</HeaderLink>
        </nav>
    </header>

    <main data-page={page}>
      <slot />
    </main>

    <Footer />
  </body>
</html>

<style>
header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
    text-align: right;

    > b {
        font-size: 1.5rem;
    }
}
#siteNav {
    margin-block-start: 0;
}
#homeLink {
  border-bottom: none;
  color: inherit;
  font-weight: bold;
}
</style>