---
import { formatDesc } from 'src/helpers/formatDesc'

export interface Props {
  title: string
  description?: string
  publishDate: string
  rawDate: Date
  pagePath?: string
  externalUrl?: string
}

const {
  title,
  description,
  publishDate,
  rawDate,
  pagePath,
  externalUrl,
} = Astro.props;

const postDesc = formatDesc(description);
---

<div class="title">
  <a
    href={externalUrl ? externalUrl : pagePath}
    target={externalUrl ? '_blank' : '_self'}
    class:list={[
      "unset",
      "transition-[background-size] duration-300 ",
      "bg-gradient-to-r bg-left-bottom bg-no-repeat",
      "bg-[length:0%_55%] hover:bg-[length:100%_55%] dark:bg-[length:0%_2px] hover:dark:bg-[length:100%_2px]",
      "from-primary-blue to-primary-blue dark:from-primary-blue dark:to-primary-blue",
    ]}
  >
    {externalUrl && (
      <div>
        <strong>{title}</strong>
        {postDesc && <span>&mdash; {postDesc}</span>}
      </div>
      <span>
        <i class="ml-1 mr-1 text-[12px] pb-2 fa-solid fa-up-right-from-square" />
      </span>
    )}
    {!externalUrl && (
      <div>
        <strong>{title}</strong>
        {postDesc && <span>&mdash; {postDesc}</span>}
      </div>
    )}
  </a>
</div>

<div class="text-text-muted text-sm italic pt-1">
  <time datetime={rawDate.toISOString()}>
    {publishDate}
  </time>
</div>